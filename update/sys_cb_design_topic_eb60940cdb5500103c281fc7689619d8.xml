<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_cb_design_topic">
    <sys_cb_design_topic action="INSERT_OR_UPDATE">
        <compiled_topic display_value="_PRVW__eb60940c505500108d2c3a9797ec33d5">e760940cdb5500103c281fc7689619d6</compiled_topic>
        <design_definition>{"type":"FlowTopic","triggers":[{"type":"Trigger","name":"d46c20fa8d6c466fb4731b622bf0d38c","triggerType":"request","id":"d46c20fa8d6c466fb4731b622bf0d38c"}],"goals":[{"name":"primary","trigger_id":"d46c20fa8d6c466fb4731b622bf0d38c","nodes":[{"type":"StartGoal","goal_id":"52fc3bd68994485c9076e41a5823c5d2","greeting_msg":{"type":"String","mode":"string","value":"I can help you find and update NeedIt records for a type of request."},"id":"308df92359374889b585721b9eabc412","name":"Start"},{"type":"TerminateGoal","goal_id":"52fc3bd68994485c9076e41a5823c5d2","confirmation_msg":{"type":"String","mode":"string","value":"Ask again when you need to update other NeedIt records."},"id":"d883d5b5b7c54da2b9d937f9be7222e2","name":"End"},{"type":"ChoiceInputPrompt","expression_mode":"simple","id":"09f0a9061b6845308415d1c66cd7d078","name":"NeedIt Type","goal_id":"52fc3bd68994485c9076e41a5823c5d2","variable_id":"d43605d56f454e4cbe46717856f252a3","message":{"type":"String","mode":"string","value":"What type of NeedIt record would you like to view?"},"optional":false},{"type":"OutputPrompt","value":{"type":"String","mode":"script","value":"(function execute() {\n\t    // Return the display value (Label) for the needit_type choice\n\t    return 'You selected: ' + vaInputs.needit_type.getDisplayValue();\n\t})()\n"},"id":"0b0eb24e035c4a6e94dc57d7c0e7907b","name":"Confirm NeedIt Type","goal_id":"52fc3bd68994485c9076e41a5823c5d2"},{"type":"ReferenceChoiceInputPrompt","mode":"external","id":"fb8a01971e1f499cb1be845cdbf94918","name":"NeedIt List","goal_id":"52fc3bd68994485c9076e41a5823c5d2","variable_id":"075ca96981504973952b7e50af8e77be","message":{"type":"String","mode":"string","value":"Select a NeedIt record to view"},"optional":false,"expression_mode":"script","script":"(function execute(table) {\n\t\n\t    // Initialize an array for the list of NeedIt records to show\n\t    var options = [];\n\t\n\t    // Query the table selected in the Table field for active records with the \n\t    // u_request_type selected in the NeedIt Type node where the user is the \n\t    // u_requested_for.\n\t    var grNI = new GlideRecord(table);\n\t    grNI.addQuery('u_request_type',vaInputs.needit_type.getValue());\n\t    grNI.addQuery('active','true');\n\t    grNI.addQuery('u_requested_for',vaInputs.user);\n\t    grNI.query();\n\t\n\t    // Push a value and label pair to the array for each record the query returns.\n\t    // The value is the unique value. The label is the number and short_description for the\n\t    // NeedIt record.\n\t    while(grNI.next()) {\n\t        options.push({ 'value': grNI.getUniqueValue(), 'label': grNI.getValue('number') + \": \" + grNI.getValue('short_description') });\n\t    }\n\t\n\t    // Return the array\n\t    return options;\n\t\n\t})(table)","no_options_found_message":{"type":"String","mode":"string","value":"You have no open NeedIt records."},"condition":{"type":"Condition","mode":"glide_scripted_query","value":"(function execute(table) {\n\t\n\t    // Initialize an array for the list of NeedIt records to show\n\t    var options = [];\n\t\n\t    // Query the table selected in the Table field for active records with the \n\t    // u_request_type selected in the NeedIt Type node where the user is the \n\t    // u_requested_for.\n\t    var grNI = new GlideRecord(table);\n\t    grNI.addQuery('u_request_type',vaInputs.needit_type.getValue());\n\t    grNI.addQuery('active','true');\n\t    grNI.addQuery('u_requested_for',vaInputs.user);\n\t    grNI.query();\n\t\n\t    // Push a value and label pair to the array for each record the query returns.\n\t    // The value is the unique value. The label is the number and short_description for the\n\t    // NeedIt record.\n\t    while(grNI.next()) {\n\t        options.push({ 'value': grNI.getUniqueValue(), 'label': grNI.getValue('number') + \": \" + grNI.getValue('short_description') });\n\t    }\n\t\n\t    // Return the array\n\t    return options;\n\t\n\t})(table)"}},{"type":"RecordOutputPrompt","mode":"variable","table":"x_58872_needit_needit","variable_id":"075ca96981504973952b7e50af8e77be","fields":["priority","short_description","u_when_needed"],"id":"1a6af220546e4d5e8666a03dccbad6ff","name":"NeedIt Card","goal_id":"52fc3bd68994485c9076e41a5823c5d2","condition":{"type":"Condition","mode":"variable","value":""}},{"type":"InputPrompt","variable_id":"53de2d1c1f8d41cb97abd1ce444537a9","message":{"type":"String","mode":"string","value":"Would you like to view another NeedIt Record?"},"optional":false,"id":"c5fd17eb87f245e2b259766ee916da19","name":"Search Again","goal_id":"52fc3bd68994485c9076e41a5823c5d2"},{"type":"Decision","name":"Find more NeedIt records?","branches":[{"type":"Branch","label":"No","expression":{"type":"Applicability","mode":"query","value":"search_again="},"id":"bbca3f2d495d46b3a21af2463c287569","name":"No"},{"type":"Branch","label":"Yes","expression":{"type":"Applicability","mode":"query","value":"search_again=true"},"id":"c1a6d3c2c90549d4bc0a7d4690de1917","name":"Yes"}],"id":"9668e23b3b2240a386c5c26f4b20581e","goal_id":"52fc3bd68994485c9076e41a5823c5d2"},{"type":"InputPrompt","variable_id":"ecbc05515bbe4c97a59a64512bcd6b78","message":{"type":"String","mode":"string","value":"When do you need the NeedIt completed?"},"optional":false,"id":"e03b96a53b0140b38f9ba94aad8b6741","name":"New When Needed Date","goal_id":"52fc3bd68994485c9076e41a5823c5d2"},{"type":"CRUDAction","mode":"update","query":"u_when_needed={{vaInputs.new_when_needed_date}}","variable_id":"075ca96981504973952b7e50af8e77be","id":"361a140287cd4d5aae6882c298c8a787","name":"Change When Needed Date","goal_id":"52fc3bd68994485c9076e41a5823c5d2"},{"type":"RecordOutputPrompt","mode":"variable","table":"x_58872_needit_needit","variable_id":"075ca96981504973952b7e50af8e77be","fields":["u_when_needed"],"id":"4ccabafc9e39484e925936c5ba52da12","name":"Updated NeedIt","goal_id":"52fc3bd68994485c9076e41a5823c5d2","condition":{"type":"Condition","mode":"variable","value":""}},{"type":"ChoiceInputPrompt","expression_mode":"simple","id":"2e0a3a66fe8d4756ae7d00a05f01d558","name":"Make a Change?","goal_id":"52fc3bd68994485c9076e41a5823c5d2","variable_id":"5325df87895f4c89abd30a771ffe188c","message":{"type":"String","mode":"string","value":"Make a Change?"},"optional":false},{"type":"Decision","name":"Decision","branches":[{"type":"Branch","label":"Change When needed ","expression":{"type":"Applicability","mode":"query","value":"make_a_change_=when needed"},"id":"2a9a15d4eed441ab85226346ebf3e550","name":"Change When needed "},{"type":"Branch","label":"Nothing","expression":{"type":"Applicability","mode":"query","value":"make_a_change_=nothing"},"id":"96868e4b30e74a3fb42e7126a3d4f57e","name":"Nothing"},{"type":"Branch","label":"Change Short description","expression":{"type":"Applicability","mode":"query","value":"make_a_change_=short description"},"id":"3da46884de004ec2b9e05074f4ac386c","name":"Change Short description"}],"id":"d9f7ba32b0904c9cb903f2083d396dec","goal_id":"52fc3bd68994485c9076e41a5823c5d2"},{"type":"InputPrompt","variable_id":"955935894ad34740a44cb64a68b482a3","message":{"type":"String","mode":"string","value":"Please provide a newÂ New Short description"},"optional":false,"id":"c298628fb5094689a26e20ebe8924ca1","name":"New Short description","goal_id":"52fc3bd68994485c9076e41a5823c5d2"},{"type":"CRUDAction","mode":"update","query":"short_description={{vaInputs.new_short_description}}","variable_id":"075ca96981504973952b7e50af8e77be","id":"e6ee8067de4649f7ba5452eb911b7c99","name":"Change Short description","goal_id":"52fc3bd68994485c9076e41a5823c5d2"},{"type":"RecordOutputPrompt","mode":"variable","table":"x_58872_needit_needit","variable_id":"075ca96981504973952b7e50af8e77be","fields":["short_description"],"id":"a5a00debd48a4472a92c14fe3ff10c0e","name":"Updated NeedIt","goal_id":"52fc3bd68994485c9076e41a5823c5d2","condition":{"type":"Condition","mode":"variable","value":""}},{"type":"ScriptedAction","script":"(function execute() {\n\t    // Add 1 to the search_count variable\n\t    vaVars.search_count = vaVars.search_count + 1;\n\t})()","id":"d7dbb6e97b1940468eef1d5eea9bd9ca","name":"Update search_count","goal_id":"52fc3bd68994485c9076e41a5823c5d2"},{"type":"Decision","name":"search_count Value","branches":[{"type":"Branch","label":"search_count &lt; 3","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n\t    // If the value of search_count is less than 3, return true\n\t    // otherwise, return false\n\t    if (vaVars.search_count &lt; 3)\n\t        return true;\n\t    else\n\t        return false;\n\t})()"},"id":"5a8808aa220244ea8311e0da4ed09c3c","name":"search_count &lt; 3"},{"type":"Branch","label":"search_count &gt;= 3","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n\t    // If the value of search_count is less than 3, return true\n\t    // otherwise, return false\n\t    if (vaVars.search_count &lt; 3)\n\t        return false;\n\t    else\n\t        return true;\n\t})()"},"id":"02f1dbe80e0540e799cbc34bda6c1800","name":"search_count &gt;= 3"}],"id":"c1c9d181ded94c85b3c41a3d5c555e3b","goal_id":"52fc3bd68994485c9076e41a5823c5d2"},{"type":"OutputPrompt","value":{"type":"String","mode":"script","value":"(function execute() {\n\t    // If Live Chat is available, inform users they will be transfered to a live agent\n\t    // otherwise, let them know how to work with more NeedIt records\n\t    if (vaSystem.isLiveAgentAvailable()){\n\t        return 'You have reached your NeedIt search quota. I will transfer you to a live agent for assistance.'\n\t    } else {\n\t        return 'You have reached your NeedIt search quota. If you need to work with multiple NeedIt records, open NeedIt &gt; My NeedIt Requests.'\n\t    }\n\t})()\n"},"id":"e8a3a0c7234d4f7ba18136c04935ce2a","name":"Quota Reached","goal_id":"52fc3bd68994485c9076e41a5823c5d2"},{"type":"ScriptedAction","script":"(function execute() {\n\t    // Transfer to a live agent\n\t    vaSystem.connectToAgent()\n\t})()\n","id":"8483a19c52f742e4971b1cd932f8eb5c","name":"Transfer to Agent","goal_id":"52fc3bd68994485c9076e41a5823c5d2","applicability":{"type":"Applicability","mode":"script","value":"(function execute() {\n\t    // If Live Chat is available, return true\n\t    // otherwise, return false\n\t    if (vaSystem.isLiveAgentAvailable()){\n\t        return true;\n\t    } else {\n\t        return false;\n\t    }\n\t})()"}}],"edges":[{"type":"Edge","source_node_id":"308df92359374889b585721b9eabc412","target_node_id":"09f0a9061b6845308415d1c66cd7d078","id":"16b11bcab33d4f5bbf64edc8b33cff62"},{"type":"Edge","source_node_id":"09f0a9061b6845308415d1c66cd7d078","target_node_id":"0b0eb24e035c4a6e94dc57d7c0e7907b","id":"f087cd503ef3466dab18a04bab81d532"},{"type":"Edge","source_node_id":"0b0eb24e035c4a6e94dc57d7c0e7907b","target_node_id":"fb8a01971e1f499cb1be845cdbf94918","id":"05279a20968c4beea09c62ead8e7b5af"},{"type":"Edge","source_node_id":"fb8a01971e1f499cb1be845cdbf94918","target_node_id":"1a6af220546e4d5e8666a03dccbad6ff","id":"d4ec38dc1fa7483283a1be535ef2a7fb"},{"type":"Edge","source_node_id":"c5fd17eb87f245e2b259766ee916da19","target_node_id":"9668e23b3b2240a386c5c26f4b20581e","id":"0a3c4f7dfb1f42c682c742360f0d540d"},{"type":"Edge","source_node_id":"9668e23b3b2240a386c5c26f4b20581e","target_node_id":"d883d5b5b7c54da2b9d937f9be7222e2","branch_id":"bbca3f2d495d46b3a21af2463c287569","id":"fbf4628081b045bf98d697756292a459","name":"bbca3f2d495d46b3a21af2463c287569"},{"type":"Edge","source_node_id":"e03b96a53b0140b38f9ba94aad8b6741","target_node_id":"361a140287cd4d5aae6882c298c8a787","id":"87dbae008d414dfe8ffd16fd77b1399f"},{"type":"Edge","source_node_id":"361a140287cd4d5aae6882c298c8a787","target_node_id":"4ccabafc9e39484e925936c5ba52da12","id":"71e3fd13ca29443fafd4eab75d037844"},{"type":"Edge","source_node_id":"4ccabafc9e39484e925936c5ba52da12","target_node_id":"c5fd17eb87f245e2b259766ee916da19","id":"7bf2b7186caf4df589a7d8061c14be44"},{"type":"Edge","source_node_id":"1a6af220546e4d5e8666a03dccbad6ff","target_node_id":"2e0a3a66fe8d4756ae7d00a05f01d558","id":"76fc802480ee45a4aa84d6c1bcf8d581"},{"type":"Edge","source_node_id":"2e0a3a66fe8d4756ae7d00a05f01d558","target_node_id":"d9f7ba32b0904c9cb903f2083d396dec","id":"33e9dad9863748fca4002bbdd2b1172a"},{"type":"Edge","source_node_id":"d9f7ba32b0904c9cb903f2083d396dec","target_node_id":"e03b96a53b0140b38f9ba94aad8b6741","branch_id":"2a9a15d4eed441ab85226346ebf3e550","id":"daf671b6adba4e9eaa6cdfbd47fe57af","name":"2a9a15d4eed441ab85226346ebf3e550"},{"type":"Edge","source_node_id":"d9f7ba32b0904c9cb903f2083d396dec","target_node_id":"c5fd17eb87f245e2b259766ee916da19","branch_id":"96868e4b30e74a3fb42e7126a3d4f57e","id":"4f5a67f0896f4178a7f54036ca987851","name":"96868e4b30e74a3fb42e7126a3d4f57e"},{"type":"Edge","source_node_id":"d9f7ba32b0904c9cb903f2083d396dec","target_node_id":"c298628fb5094689a26e20ebe8924ca1","branch_id":"3da46884de004ec2b9e05074f4ac386c","id":"e3292f4a42da47d29353aefffb2b146e","name":"3da46884de004ec2b9e05074f4ac386c"},{"type":"Edge","source_node_id":"c298628fb5094689a26e20ebe8924ca1","target_node_id":"e6ee8067de4649f7ba5452eb911b7c99","id":"fbbb0db6cdab4bccb3dfe3a5b0502559"},{"type":"Edge","source_node_id":"e6ee8067de4649f7ba5452eb911b7c99","target_node_id":"a5a00debd48a4472a92c14fe3ff10c0e","id":"8ab32e1e1353413eb38df942039c3de9"},{"type":"Edge","source_node_id":"a5a00debd48a4472a92c14fe3ff10c0e","target_node_id":"c5fd17eb87f245e2b259766ee916da19","id":"65f5cebeec054678842a3722c727b0b5"},{"type":"Edge","source_node_id":"9668e23b3b2240a386c5c26f4b20581e","target_node_id":"d7dbb6e97b1940468eef1d5eea9bd9ca","branch_id":"c1a6d3c2c90549d4bc0a7d4690de1917","id":"91dfde1f3a06496eabdc98c67134fcfe","name":"c1a6d3c2c90549d4bc0a7d4690de1917"},{"type":"Edge","source_node_id":"d7dbb6e97b1940468eef1d5eea9bd9ca","target_node_id":"c1c9d181ded94c85b3c41a3d5c555e3b","id":"c5885dd0f61c4e1699a193355e92077e"},{"type":"Edge","source_node_id":"c1c9d181ded94c85b3c41a3d5c555e3b","target_node_id":"09f0a9061b6845308415d1c66cd7d078","branch_id":"5a8808aa220244ea8311e0da4ed09c3c","id":"a2bf9870770c420681bf1446463d9d1f","name":"5a8808aa220244ea8311e0da4ed09c3c"},{"type":"Edge","source_node_id":"c1c9d181ded94c85b3c41a3d5c555e3b","target_node_id":"e8a3a0c7234d4f7ba18136c04935ce2a","branch_id":"02f1dbe80e0540e799cbc34bda6c1800","id":"0cb2cc8da5864b46b9239060af2f0176","name":"02f1dbe80e0540e799cbc34bda6c1800"},{"type":"Edge","source_node_id":"e8a3a0c7234d4f7ba18136c04935ce2a","target_node_id":"8483a19c52f742e4971b1cd932f8eb5c","id":"05ed72029b034ad3a1cc6096101c79b5"},{"type":"Edge","source_node_id":"8483a19c52f742e4971b1cd932f8eb5c","target_node_id":"d883d5b5b7c54da2b9d937f9be7222e2","id":"17ddab444ec54a008276d730e057b314"}],"id":"52fc3bd68994485c9076e41a5823c5d2"}],"script_variables":[{"type":"String","name":"search_count","value":{"type":"String","mode":"string","value":"0"},"id":"f4255df398dd408da9534ddc31a92035"}],"glide_variables":[{"type":"Choice","choices":[{"name":"Legal","element":"legal"},{"name":"Facilities","element":"facilities"},{"name":"Human Resources","element":"hr"}],"id":"d43605d56f454e4cbe46717856f252a3","name":"needit_type"},{"type":"Reference","table":"x_58872_needit_needit","id":"075ca96981504973952b7e50af8e77be","name":"needit_list"},{"type":"True/False","id":"53de2d1c1f8d41cb97abd1ce444537a9","name":"search_again"},{"type":"Date/Time","mode":"date","id":"ecbc05515bbe4c97a59a64512bcd6b78","name":"new_when_needed_date"},{"type":"Reference","table":"","id":"2cdc9988413d4c358115d23383d0fe64","name":"change_when_needed_date"},{"type":"Choice","choices":[{"name":"Short description","element":"short description"},{"name":"When needed","element":"when needed"},{"name":"Nothing","element":"nothing"}],"id":"5325df87895f4c89abd30a771ffe188c","name":"make_a_change_"},{"type":"String","name":"new_short_description","id":"955935894ad34740a44cb64a68b482a3"},{"type":"Reference","table":"","id":"2a1f1dbc3e8a4fd9b581b491b803c265","name":"change_short_description"},{"type":"Reference","table":"sys_user","id":"current-user","name":"user"}],"roles":[],"scope":"b337b843db4900103c281fc7689619cc","id":"6ea7b047db4900103c281fc768961974","name":"_PRVW__eb60940c505500108d2c3a9797ec33d5","key_phrases":["Update NeedIt Records","NeedIt Request"]}</design_definition>
        <design_topic_id>6ea7b047db4900103c281fc768961974</design_topic_id>
        <name>_PRVW__eb60940c505500108d2c3a9797ec33d5</name>
        <sys_class_name>sys_cb_design_topic</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2019-11-18 15:28:43</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_domain_path>/</sys_domain_path>
        <sys_id>eb60940cdb5500103c281fc7689619d8</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>FlowTopic</sys_name>
        <sys_package display_value="NeedIt Virtual Agent Conversations" source="x_286552_needit_va">b337b843db4900103c281fc7689619cc</sys_package>
        <sys_policy/>
        <sys_scope display_value="NeedIt Virtual Agent Conversations">b337b843db4900103c281fc7689619cc</sys_scope>
        <sys_update_name>sys_cb_design_topic_eb60940cdb5500103c281fc7689619d8</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2019-11-18 15:28:43</sys_updated_on>
        <type>FlowTopic</type>
    </sys_cb_design_topic>
</record_update>
